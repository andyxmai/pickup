{% extends "base.html" %}
{% block content %}
  {% if messages %}
  <section style="padding-bottom:0">
    {% for message in messages %}
    <div class="alert alert-success alert-dismissable" style="margin-bottom:0; text-align: center">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      {{message}}
    </div>
    {% endfor %}
  </section>
  {% endif %}
  <div id="home-container" class="col-xs-12" style="background-image: url(/static/img/white_wall.png); overflow:scroll">
    <div id="map-container" class="col-xs-6">
       <!-- <p><b> Filter games by sport </b></p> -->
       <a href="/create_game" type="button" class="btn btn-success" style="position: relative; z-index:2">
      <i class="fa fa-pencil fa-lg"></i> Create Game</a><br/>
  <label><input type="radio" id="all" name='sport'onclick="boxclick(this,'sport','all')" checked /> All </label>
<label><input type="radio" id="basketball" name='sport'onclick="boxclick(this,'sport','basketball')" /> Basketball </label>
<label><input type="radio" id="football" name='sport' onclick="boxclick(this,'sport','football')"  /> Football </label>
<label><input type="radio" id="soccer" name='sport' onclick="boxclick(this,'sport','soccer')"  /> Soccer</label>
<label><input type="radio" id="frisbee" name='sport' onclick="boxclick(this,'sport','frisbee')"  /> Frisbee</label>
<label><input type="radio" id="tennis" name='sport' onclick="boxclick(this,'sport','tennis')"  /> Tennis</label>
<label><input type="radio" id="golf" name='sport' onclick="boxclick(this,'sport','golf')" /> Golf</label>
<label><input type="radio" id="volleyball"  name='sport' onclick="boxclick(this,'sport','volleyball')" /> Volleyball</label>
    <div id="map-canvas"></div>
   
 
</div>
  <div class="col-xs-6">
        
        <h3>Upcoming Games</h3>
        <table id="games">
            {% for action in actions %}
            <tr class="{% cycle 'odd' 'even' %}"><td class="date"><!-- <i class="fa fa-dribbble fa-lg"></i> --><span class="game-month">{{action.timestamp.date | date:"M"}}</span><br/><span class="game-day">{{game.timeStart.date.day}}</span></td><td class="info">
        <div class="single-game">     
<!--         <div class="accordion" id="accordion{{game.id}}">
            <div class="accordion-group">
             <div class="accordion-heading"> --> 
                    <h5 class="game-name">
                    {% if game.sport == "soccer" %}
                    <img class="sport-icon" src="/static/img/sports/football/football-25.png"></img>
                    {% elif game.sport == "football" %}
                    <img class="sport-icon" src="/static/img/sports/rugby/rugby-25.png"></img>
                    {% elif game.sport == "basketball" %}
                    <img class="sport-icon" src="/static/img/sports/basketball/basketball-25.png"></img>
                    {% elif game.sport == "frisbee" %}
                    <img class="sport-icon" src="/static/img/sports/frisbee/frisbee-25.png"></img>
                    {% elif game.sport == "golf" %}
                    <img class="sport-icon" src="/static/img/sports/trophy/trophy-25.png"></img>
                    {% elif game.sport == "tennis" %}
                    <img class="sport-icon" src="/static/img/sports/tennis/tennis-25.png"></img>
                    {% elif game.sport == "volleyball" %}
                    <img class="sport-icon" src="/static/img/sports/volleyball/volleyball-25.png"></img>
                    {% endif %}
                    {{game.name}}
                    </h5>
                <ul class="game-details">
                    <li class="game-location">{{game.location.name}}</li>
                    <li class="game-time">{{game.timeStart.time}}</li>
                    <li class="game-status">Status: {{game.users.count}}/{{game.cap}} Players</li>
                </ul>
            </td>
               <!--  <form action="/game/{{game.id}}"> -->
                       <form role="form" action="/join_quit_game/" method="POST" id="join_form_{{game.id}}">{% csrf_token %}
                    <input type="hidden" name="game_id" value="{{game.id}}">
                  </form>
                   <td class="links"> <a href="/game/{{game.id}}" class="btn btn-default visit-game">Game Details</a>
                    {% if loggedinUser != game.creator %}
                     {% if loggedinUser not in game.users.all %}
                        {% if game.users.all.count < game.cap %}
                    <button id="join_{{game.id}}" type="button" class="btn btn-success visit-game join_button">
                        
                        <i class="fa fa-plus fa-md"></i>Join</button> </td>
                        {% endif %}
                    {% else %}
                        <button type="button" class="visit-game btn btn-danger join_button" id="leave_{{game.id}}">
                        <i class="fa fa-minus fa-lg"></i> Leave</button> 

                    {% endif %}
                    {% else %}
                    <form role="form" action="/delete_game/" method="POST" id="delete_form">{% csrf_token %}
                      <input type="hidden" name="game_id" value="{{game.id}}">
                    </form>
                    <button type="button" class="btn btn-danger delete_button visit-game" id="delete">
                      <i class="fa fa-trash-o fa-lg"></i> Delete Game
                    </button> 
                    {% endif %}
               <!--  </form> -->
                {% empty %}
                No games found. Please join one!
                {% endfor %}
<!--                 </div>
                </div>
            </div> -->
    </div></td></tr>
</table>
</div>
{%endblock%}

