{% extends "base.html" %}

{% block title %}{{user.get_full_name}}{%endblock%}

{% block content %}
  {% if messages %}
  <section style="padding-bottom:0;">
    {% for message in messages %}
    <div class="alert alert-success alert-dismissable" style="margin-bottom:0; text-align: center;">
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
      {{message}}
    </div>
    {% endfor %}
  </section>
  {% endif %}
  <div id="home-container" class="col-xs-12" style="overflow:scroll">
    <div id="map-container" class="col-xs-6">
       <a href="/create_game" type="button" class="btn btn-success" style="position: relative; z-index:2; margin-left: auto;">
      <i class="fa fa-pencil fa-lg"></i> Create Game</a><br/>
      <!-- <p><b> Filter games by sport </b></p> -->
  <form>
  <label><input type="checkbox" class="homesport" id="all" name='sport-all'onclick="boxclick(this,'sport','all')" checked /> All </label>
  <label><input type="checkbox" id="basketball" name='sport-bball'onclick="boxclick(this,'sport','basketball')" unchecked /> Basketball </label>
  <label><input type="checkbox" id="football" name='sport-fball' onclick="boxclick(this,'sport','football')"  unchecked /> Football </label>
  <label><input type="checkbox" id="soccer" name='sport-sball' onclick="boxclick(this,'sport','soccer')" unchecked /> Soccer</label>
  <label><input type="checkbox" id="frisbee" name='sport-friball' onclick="boxclick(this,'sport','frisbee')" unchecked /> Frisbee</label>
  <label><input type="checkbox" id="tennis" name='sport-tball' onclick="boxclick(this,'sport','tennis')" unchecked /> Tennis</label>
  <label><input type="checkbox" id="golf" name='sport-golf' onclick="boxclick(this,'sport','golf')" unchecked /> Golf</label>
  <label><input type="checkbox" id="volleyball"  name='sport-vball' onclick="boxclick(this,'sport','volleyball')" unchecked /> Volleyball</label>
  <!-- <button type="button" id="all" class="btn btn-homesport btn-xs" onclick="boxclick(this,'sport','all')">
    <img class="sport-icon" src="/static/img/sports/medal/medal-25.png"></img> 
    
    <input type="checkbox" value="None" id="squaredTwo" name="check" /> &nbsp All
  </button>
  <button type="button" id="basketball" class="btn btn-homesport btn-xs" onclick="boxclick(this,'sport','basketball')">
    <img class="sport-icon" src="/static/img/sports/basketball/basketball-25.png"></img> Basketball
  </button>
  <button type="button" id="football" class="btn btn-homesport btn-xs">
    <img class="sport-icon" src="/static/img/sports/rugby/rugby-25.png"></img> Football
  </button>
  <button type="button" id="soccer" class="btn btn-homesport btn-xs">
    <img class="sport-icon" src="/static/img/sports/football/football-25.png"></img> Soccer
  </button>
  <button type="button" id="frisbee" class="btn btn-homesport btn-xs">
    <img class="sport-icon" src="/static/img/sports/frisbee/frisbee-25.png"></img> Frisbee
  </button>
  <button type="button" id="tennis" class="btn btn-homesport btn-xs">
    <img class="sport-icon" src="/static/img/sports/tennis/tennis-25.png"></img> Tennis
  </button>
  <button type="button" id="golf" class="btn btn-homesport btn-xs">
    <img class="sport-icon" src="/static/img/sports/trophy/trophy-25.png"></img> Golf
  </button>
  <button type="button" id="volleyball" class="btn btn-homesport btn-xs">
    <img class="sport-icon" src="/static/img/sports/volleyball/volleyball-25.png"></img> Volleyball
  </button> -->
  </form>

  

  <div id="map-canvas"></div>
    
   {% if game_recommendations %}
    <div class="recommendations">
      <h5 style="margin-top:30px; margin-bottom:30px">Games Recommended For You</h5>
      {% for recommendation in game_recommendations %}
      <p style="float: left; margin-right: 10px;">
       <img class="sport-icon" src="/static/img/sports/{{recommendation.0.sport.name}}/{{recommendation.0.sport.name}}-25.png"></img>
        <a href="/game/{{recommendation.0.id}}"><u>{{recommendation.0.name}}</u></a>
      </p>
      {% endfor %}
    </div>
    {% endif %}
 
</div>

  <div class="activity-feed col-xs-6">
    <h3 class="activity-feed-label">Activity Feed</h3>
      <table id="activity">
         {% for action in actions %}
         {% if action.actor != user %}
            <tr class="{% cycle 'odd' 'even' %}"><td class="date"><!-- <i class="fa fa-dribbble fa-lg"></i> --><span class="game-month">{{action.timestamp.date | date:"M"}} {{action.timestamp.date.day}}</span><br/><span class="game-time" style="text-align:center; font-weight: bold;">
              {{action.timestamp.time | time:"g:i A"}}</span></td><td class="info">
        <div class="single-game">     
          <h5 class="activity-name">
                    {% if action.verb == "leave game" %}
                      <i class="fa fa-minus-circle fa-xs"></i> <a href="/user/{{action.actor.id}}" class="user-name">{{action.actor.first_name}} {{action.actor.last_name}}</a> left <a href="/game/{{action.action_object.id}}" class="game-name">{{action.action_object.name}}</a>.
                      </h5>
                    {% elif action.verb == "game created" %}
                      <i class="fa fa-star fa-xs"></i> <a href="/user/{{action.actor.id}}" class="user-name">{{action.actor.first_name}} {{action.actor.last_name}}</a> created <a href="/game/{{action.action_object.id}}" class="game-name">{{action.action_object.name}}</a>.
                      </h5>
                    {% elif action.verb == "join game" %}
                      <i class="fa fa-plus-circle fa-xs"></i> <a href="/user/{{action.actor.id}}" class="user-name">{{action.actor.first_name}} {{action.actor.last_name}}</a> joined <a href="/game/{{action.action_object.id}}" class="game-name">{{action.action_object.name}}</a>.
                      </h5>
                    {% elif action.verb == "started following" %}
                      <i class="fa fa-rss fa-xs"></i> <a href="/user/{{action.actor.id}}" class="user-name">{{action.actor.first_name}} {{action.actor.last_name}}</a> is now following <a href="/user/{{action.target.id}}" class="game-name">{{action.target.first_name}} {{action.target.last_name}}</a>. </h5>
                    {% elif action.verb == "photo upload" %}
                      <i class="fa fa-instagram fa-xs"></i> <a href="/user/{{action.actor.id}}" class="user-name">{{action.actor.first_name}} {{action.actor.last_name}}</a> uploaded a photo for <a class="game-name" href="/game/{{action.action_object.game.id}}">{{action.action_object.game.name}}</a>:</h5> 
                      <!-- The Bootstrap Image Gallery lightbox, should be a child element of the document body -->
    <div id="blueimp-gallery" class="blueimp-gallery">
        <!-- The container for the modal slides -->
        <div class="slides"></div>
        <!-- Controls for the borderless lightbox -->
        <h3 class="title"></h3>
        <a class="prev">‹</a>
        <a class="next">›</a>
        <a class="close">×</a>
        <a class="play-pause"></a>
        <ol class="indicator"></ol>
        <!-- The modal dialog, which will be used to wrap the lightbox content -->
        <div class="modal fade">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" aria-hidden="true">&times;</button>
                        <h4 class="modal-title"></h4>
                    </div>
                    <div class="modal-body next"></div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default pull-left prev">
                            <i class="glyphicon glyphicon-chevron-left"></i>
                            Previous
                        </button>
                        <button type="button" class="btn btn-primary next">
                            Next
                            <i class="glyphicon glyphicon-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
  
                    <div class="game_photos" style="width:100%">
                      <div id="links">
                        <a href="{{action.action_object.standard}}" data-gallery>
                          <img class="thumbnail-img" src="{{action.action_object.thumbnail}}"></img>
                      </a>
                    </div></div>


                      <!-- <img class="thumbnail-img" src="{{action.action_object.thumbnail}}"></img> -->
                    {% endif %}
                    
                <!-- <ul class="game-details">
                    <li class="game-location">{{game.location.name}}</li>
                    <li class="game-time">{{game.timeStart.time}}</li>
                    <li class="game-status">Status: {{game.users.count}}/{{game.cap}} Players</li>
                </ul> -->
            </td>
               <!--  <form action="/game/{{game.id}}"> -->
                   <!-- <td class="links"> <a href="/game/{{game.id}}" class="btn btn-default visit-game">Game Details</a>
                    {% if loggedinUser != game.creator %}
                     {% if loggedinUser not in game.users.all %}
                        {% if game.users.all.count < game.cap %}
                    <button id="join_{{game.id}}" type="button" class="btn btn-success visit-game join_button">
                        
                        <i class="fa fa-plus fa-md"></i>Join</button> </td>
                        {% endif %}
                    {% else %}
                        <button type="button" class="visit-game btn btn-danger join_button" id="leave_{{game.id}}">
                        <i class="fa fa-minus fa-lg"></i> Leave</button> 

                    {% endif %}
                    {% else %}
                    <form role="form" action="/delete_game/" method="POST" id="delete_form">{% csrf_token %}
                      <input type="hidden" name="game_id" value="{{game.id}}">
                    </form>
                    <button type="button" class="btn btn-danger delete_button visit-game" id="delete">
                      <i class="fa fa-trash-o fa-lg"></i> Delete Game
                    </button> 
                    {% endif %}
               </form> -->
                {% endif %}
                {% empty %}
                <h6 style="color: black; text-align: center;">No activity found. Join or create a game!</h6>
                {% endfor %}
<!--                 </div>
                </div>
            </div> 
    </div></td>--></tr>
</table>
</div>

<script src="/static/js/home.js"></script>


<script src="/static/js/jquery.blueimp-gallery.min.js"></script>
<script src="/static/js/bootstrap-image-gallery.min.js"></script>
{%endblock%}

